{% extends "index.html" %}
{% block section %}

<script>
    $(document).ready(function () {
        alert("{{status}}");
        $('#status option:contains("{{status}}")').prop("selected", true); 
    });
</script>

<div class="filter-bar">
    <div>
        <select name="price" id="price">
            <option value="">가격 선택</option>
            <option value="low">낮은 가격순</option>
            <option value="high">높은 가격순</option>
        </select>
    </div>

    <div>
        <select name="status" id="status" onchange="location=this.value">
            <option value="{{url_for('view_list', page=i, status='all')}}" selected>상태 선택</option>
            <option value="{{url_for('view_list', page=i, status='new')}}">미개봉 새 상품</option>
            <option value="{{url_for('view_list', page=i, status='noused')}}">미사용 상품</option>
            <option value="{{url_for('view_list', page=i, status='oftenused')}}">사용감 적음</option>
            <option value="{{url_for('view_list', page=i, status='manyused')}}">사용감 많음</option>
            <option value="{{url_for('view_list', page=i, status='broken')}}">고장난 상품</option>
        </select>

    </div>
    
    <div>
        <select name="region" id="region">
            <option value="">지역 선택</option>
            <option value="seoul">서울</option>
            <option value="busan">부산</option>
        </select>
    </div>

    <div>
        <select name="availability" id="availability">
            <option value="">판매 여부 선택</option>
            <option value="available">판매 중</option>
            <option value="sold_out">품절</option>
        </select>
    </div>
</div>

<main class="post-list">
    {% if total > 0 %}
    <div style="width:1600px">
        <div>
        <p>
        상품 리스트 -- 현재까지 {{total}}개 등록됨
        </p>
        <table>
            <tr>
            {% for key, value in row1 %}
            <td>상품이름: {{key}}</td>
            {% endfor %}
            </tr>
            <tr>
            {% for key, value in row1 %}
            <td onclick="location.href='/view_detail/{{key}}/';" style="cursor:pointer;"><img src="static/image/{{value.img_path}}" width="300px" height="300px"></td>
            {% endfor %}
            </tr>
            <tr>
                {% for key, value in row2 %}
                <td>상품이름: {{key}}</td>
                {% endfor %}
                </tr>
                <tr>
                {% for key, value in row2 %}
                <td onclick="location.href='/view_detail/{{key}}/';" style="cursor:pointer;"><img src="static/image/{{value.img_path}}" width="300px" height="300px"></td>
                {% endfor %}
            </tr>
        </table>
        </div>
        <!-- 페이지네이션을 위한 코드 시작 -->
        <div class="page-wrap">
            <div class="page-nation">
                <ul style="list-style-type: none;">
                     <li>
                        {% for i in range(page_count)%}
                        <a href="{{url_for('view_list', page=i)}}">{{i+1}}</a>
                        {% endfor %} </li>
                </ul>
            </div>
        </div>
    </div>
        {% else %}
        <p>등록된 상품이 없습니다. </p>
        {% endif %}


</main>


{% endblock section %}